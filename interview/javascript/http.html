<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>1.http 和 tcp 协议 | Friday-F</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    <meta name="description" content="一个不爱折腾的人折腾的东西">
    
    <link rel="preload" href="/assets/css/0.styles.12e565a3.css" as="style"><link rel="preload" href="/assets/js/app.ae29df75.js" as="script"><link rel="preload" href="/assets/js/4.a40782dd.js" as="script"><link rel="preload" href="/assets/js/19.233d0352.js" as="script"><link rel="prefetch" href="/assets/js/1.ba38735d.js"><link rel="prefetch" href="/assets/js/10.22a59f90.js"><link rel="prefetch" href="/assets/js/100.b28cf1df.js"><link rel="prefetch" href="/assets/js/11.871041b1.js"><link rel="prefetch" href="/assets/js/12.ae5edadb.js"><link rel="prefetch" href="/assets/js/13.3c2b932e.js"><link rel="prefetch" href="/assets/js/14.2fb8fa1d.js"><link rel="prefetch" href="/assets/js/15.5d4b9c88.js"><link rel="prefetch" href="/assets/js/16.a94aa3a8.js"><link rel="prefetch" href="/assets/js/17.67646156.js"><link rel="prefetch" href="/assets/js/18.f85d95c5.js"><link rel="prefetch" href="/assets/js/20.9faf0040.js"><link rel="prefetch" href="/assets/js/21.88d2a023.js"><link rel="prefetch" href="/assets/js/22.3a3704b1.js"><link rel="prefetch" href="/assets/js/23.092e710e.js"><link rel="prefetch" href="/assets/js/24.02303edb.js"><link rel="prefetch" href="/assets/js/25.5282c6e9.js"><link rel="prefetch" href="/assets/js/26.78ff5269.js"><link rel="prefetch" href="/assets/js/27.34543e93.js"><link rel="prefetch" href="/assets/js/28.84481a75.js"><link rel="prefetch" href="/assets/js/29.5d8bbf2b.js"><link rel="prefetch" href="/assets/js/3.c6205a94.js"><link rel="prefetch" href="/assets/js/30.33fa3211.js"><link rel="prefetch" href="/assets/js/31.861bb416.js"><link rel="prefetch" href="/assets/js/32.1da78d0b.js"><link rel="prefetch" href="/assets/js/33.66cd9bad.js"><link rel="prefetch" href="/assets/js/34.26ade154.js"><link rel="prefetch" href="/assets/js/35.e3b39784.js"><link rel="prefetch" href="/assets/js/36.66acb26a.js"><link rel="prefetch" href="/assets/js/37.a2f3982f.js"><link rel="prefetch" href="/assets/js/38.c812110e.js"><link rel="prefetch" href="/assets/js/39.051b7cd1.js"><link rel="prefetch" href="/assets/js/40.00f5d533.js"><link rel="prefetch" href="/assets/js/41.b08813c5.js"><link rel="prefetch" href="/assets/js/42.c4f50c9b.js"><link rel="prefetch" href="/assets/js/43.62fb2e96.js"><link rel="prefetch" href="/assets/js/44.6e363b48.js"><link rel="prefetch" href="/assets/js/45.4d1a64ad.js"><link rel="prefetch" href="/assets/js/46.a22592cb.js"><link rel="prefetch" href="/assets/js/47.4e5fbb30.js"><link rel="prefetch" href="/assets/js/48.9ee006c2.js"><link rel="prefetch" href="/assets/js/49.fefd4d7d.js"><link rel="prefetch" href="/assets/js/5.336ac9b2.js"><link rel="prefetch" href="/assets/js/50.2342dee8.js"><link rel="prefetch" href="/assets/js/51.3011e241.js"><link rel="prefetch" href="/assets/js/52.f9a11876.js"><link rel="prefetch" href="/assets/js/53.33df86c0.js"><link rel="prefetch" href="/assets/js/54.693eba54.js"><link rel="prefetch" href="/assets/js/55.20d3cd19.js"><link rel="prefetch" href="/assets/js/56.2140d40a.js"><link rel="prefetch" href="/assets/js/57.56a64d0f.js"><link rel="prefetch" href="/assets/js/58.1f171e0c.js"><link rel="prefetch" href="/assets/js/59.0bc81d4b.js"><link rel="prefetch" href="/assets/js/6.89d1e74e.js"><link rel="prefetch" href="/assets/js/60.deaf0238.js"><link rel="prefetch" href="/assets/js/61.f1dd5fd6.js"><link rel="prefetch" href="/assets/js/62.2a5b1eb5.js"><link rel="prefetch" href="/assets/js/63.43024de8.js"><link rel="prefetch" href="/assets/js/64.feb8c79e.js"><link rel="prefetch" href="/assets/js/65.2ba24438.js"><link rel="prefetch" href="/assets/js/66.6882b68f.js"><link rel="prefetch" href="/assets/js/67.928efbd5.js"><link rel="prefetch" href="/assets/js/68.89207352.js"><link rel="prefetch" href="/assets/js/69.ac2b6a81.js"><link rel="prefetch" href="/assets/js/7.30357921.js"><link rel="prefetch" href="/assets/js/70.0f128131.js"><link rel="prefetch" href="/assets/js/71.c60c169c.js"><link rel="prefetch" href="/assets/js/72.34d0d682.js"><link rel="prefetch" href="/assets/js/73.6aa0d7ce.js"><link rel="prefetch" href="/assets/js/74.301b7a56.js"><link rel="prefetch" href="/assets/js/75.833ad4cc.js"><link rel="prefetch" href="/assets/js/76.0e1cde88.js"><link rel="prefetch" href="/assets/js/77.c69290ab.js"><link rel="prefetch" href="/assets/js/78.cc766081.js"><link rel="prefetch" href="/assets/js/79.1fefc02e.js"><link rel="prefetch" href="/assets/js/8.33ab6990.js"><link rel="prefetch" href="/assets/js/80.70b9c996.js"><link rel="prefetch" href="/assets/js/81.2b8ceb91.js"><link rel="prefetch" href="/assets/js/82.de0c0d58.js"><link rel="prefetch" href="/assets/js/83.277a4764.js"><link rel="prefetch" href="/assets/js/84.b6dc23de.js"><link rel="prefetch" href="/assets/js/85.8768a633.js"><link rel="prefetch" href="/assets/js/86.2d0c1a3a.js"><link rel="prefetch" href="/assets/js/87.5e2df1b9.js"><link rel="prefetch" href="/assets/js/88.b57c7d3f.js"><link rel="prefetch" href="/assets/js/89.05f5d271.js"><link rel="prefetch" href="/assets/js/9.907b4fb7.js"><link rel="prefetch" href="/assets/js/90.25671b8a.js"><link rel="prefetch" href="/assets/js/91.10d9f248.js"><link rel="prefetch" href="/assets/js/92.7dd312f0.js"><link rel="prefetch" href="/assets/js/93.7ac28029.js"><link rel="prefetch" href="/assets/js/94.832e1613.js"><link rel="prefetch" href="/assets/js/95.9a656622.js"><link rel="prefetch" href="/assets/js/96.bc904d8a.js"><link rel="prefetch" href="/assets/js/97.6c2cfcbf.js"><link rel="prefetch" href="/assets/js/98.10e68268.js"><link rel="prefetch" href="/assets/js/99.8c4e1a83.js">
    <link rel="stylesheet" href="/assets/css/0.styles.12e565a3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Friday-F</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/interview/javascript/common.html" class="nav-link">
  JavaScript
</a></div><div class="nav-item"><a href="/friday/miscellaneous/sentence.html" class="nav-link">
  星期五
</a></div><div class="nav-item"><a href="https://github.com/Friday-F" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/interview/javascript/common.html" class="nav-link">
  JavaScript
</a></div><div class="nav-item"><a href="/friday/miscellaneous/sentence.html" class="nav-link">
  星期五
</a></div><div class="nav-item"><a href="https://github.com/Friday-F" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Css</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>JavaScript</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/interview/javascript/common.html" class="sidebar-link">1.JS基础</a></li><li><a href="/interview/javascript/util.html" class="sidebar-link">2.手写js</a></li><li><a href="/interview/javascript/api.html" class="sidebar-link">3.原生Api</a></li><li><a href="/interview/javascript/patterns.html" class="sidebar-link">4.设计模式</a></li><li><a href="/interview/javascript/browser.html" class="sidebar-link">5.浏览器</a></li><li><a href="/interview/javascript/http.html" aria-current="page" class="active sidebar-link">6.Http</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/interview/javascript/http.html#_1-http-和-tcp-协议" class="sidebar-link">1.http 和 tcp 协议</a></li><li class="sidebar-sub-header"><a href="/interview/javascript/http.html#_2-http-状态码" class="sidebar-link">2.HTTP 状态码</a></li><li class="sidebar-sub-header"><a href="/interview/javascript/http.html#_3-http1-0-和-http1-1-的区别" class="sidebar-link">3.HTTP1.0 和 HTTP1.1 的区别</a></li><li class="sidebar-sub-header"><a href="/interview/javascript/http.html#_4-http1-x-和-http2-0-的差别" class="sidebar-link">4.Http1.x 和 http2.0 的差别</a></li><li class="sidebar-sub-header"><a href="/interview/javascript/http.html#_5-https-和-http-的区别" class="sidebar-link">5.https 和 http 的区别</a></li><li class="sidebar-sub-header"><a href="/interview/javascript/http.html#_6-ws-和-ajax-的区别。" class="sidebar-link">6.ws 和 ajax 的区别。</a></li><li class="sidebar-sub-header"><a href="/interview/javascript/http.html#_7-ws-的长链接-和-http-的长链接-是一个东西吗" class="sidebar-link">7.ws 的长链接 和 http 的长链接 是一个东西吗</a></li><li class="sidebar-sub-header"><a href="/interview/javascript/http.html#_8-keep-alive-是什么" class="sidebar-link">8.keep-alive 是什么</a></li><li class="sidebar-sub-header"><a href="/interview/javascript/http.html#_9-dns解析" class="sidebar-link">9. DNS解析</a></li><li class="sidebar-sub-header"><a href="/interview/javascript/http.html#_10-网络安全" class="sidebar-link">10. 网络安全</a></li></ul></li><li><a href="/interview/javascript/promise.html" class="sidebar-link">7.Promise</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>webpack</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>other</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Blockchain</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>LeetcodeTop</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="_1-http-和-tcp-协议"><a href="#_1-http-和-tcp-协议" class="header-anchor">#</a> 1.http 和 tcp 协议</h2> <ul><li>TCP 链接</li></ul> <ol><li>手机能够使用联网功能是因为手机底层实现了 TCP/IP 协议，可以使手机终端通过无线网络建立 TCP 连接。TCP 协议可以对上层网络提供接口，使上层网络数据的传输建立在“无差别”的网络之上。<br></li> <li>建立 TCP 链接需要三次握手
<ol><li>客户端发送 syn 包(syn=j)到服务器，并进入 SYN_SEND 状态，等待服务器确认；</li> <li>服务器收到 syn 包，必须确认客户的 SYN（ack=j+1），同时自己也发送一个 SYN 包（syn=k），即 SYN+ACK 包，此时服务器进入 SYN_RECV 状态；</li> <li>客户端收到服务器的 SYN ＋ ACK 包，向服务器发送确认包 ACK(ack=k+1)，此包发送完毕，客户端和服务器进入 ESTABLISHED 状态，完成三次握手。</li></ol></li> <li>完成三次握手，客户端与服务器才正式开始传送数据</li> <li>四次挥手
<ul><li>四次挥手的过程
<ul><li>当服务端收到客户端关闭报文时，并不会立即关闭，先回复一个报文，告诉客户端，&quot;你发的FIN报文我收到了&quot;。只有等到我Server端所有的报文都发送完了，我才能发送连接释放请求，因此不能一起发送。故需要四步挥手</li></ul></li> <li>举例：<br> <ul><li>Browser:先告诉服务器 “我数据都发完了，你可以关闭连接了。”<br></li> <li>Server:回复浏览器 “关闭的请求我收到了，我先看看我这边还有没有数据没传完。”<br></li> <li>Server:确认过以后，再次回复浏览器 “我这边数据传输完成了，你可以关闭连接了。”<br></li> <li>Browser:告诉服务器 “好的，那我关闭了。不用回复了。”<br></li> <li>客户端又等了2MSL，确认确实没有再收到请求了，才会真的关闭TCP连接。<br></li></ul></li> <li>为什么需要四次挥手？
<ul><li>TCP 使用四次挥手的原因，是因为 TCP 的连接是全双工的，所以需要双方分别释放掉对方的连接</li> <li>单独一方的连接释放，只代 表不能再向对方发送数据，连接处于的是半释放的状态</li> <li>最后一次挥手中，客户端会等待一段时间再关闭的原因，是为了防止客户端发送给服务器的确认报文段丢失或者出错，从而导致服务器端不能正常关闭</li></ul></li></ul></li></ol> <ul><li>HTTP 链接</li></ul> <ol><li>HTTP 协议即超文本传送协议(Hypertext Transfer Protocol )，是 Web 联网的基础，也是手机联网常用的协议之一，HTTP 协议是建立在 TCP 协议之上的一种应用。</li> <li>特点：客户端发送的每次请求都需要服务器回送响应，在请求结束后，会主动释放连接
<ol><li>在 HTTP 1.0 中，客户端的每次请求都要求建立一次单独的连接，在处理完本次请求后，就自动释放连接。</li> <li>在 HTTP 1.1 中则可以在一次连接中处理多个请求，并且多个请求可以重叠进行，不需要等待一个请求结束后再发送下一个请求。</li></ol></li> <li>由于 HTTP 在每次请求结束后都会主动释放连接，因此 HTTP 连接是一种“短连接”</li></ol> <ul><li>相互关系</li></ul> <ol><li>http 是要基于 TCP 连接基础上的
<ol><li>TCP 就是单纯建立连接，不涉及任何我们需要请求的实际数据，简单的传输。</li> <li>http 是用来收发数据，即实际应用上来的。</li> <li>过程：从传输层，先说下 TCP 连接，我们要和服务端连接 TCP 连接，需要通过三次连接，包括：请求，确认，建立连接。即传说中的“三次握手协议”。
简单就是:请求，确认，连接</li></ol></li> <li>从实际上的数据应用来说 http
在前面客户端和应用服务器建立 TCP 连接之后，就需要用 http 协议来传送数据了，HTTP 协议简单来说，还是请求，确认，连接。</li> <li>TCP 是底层通讯协议，定义的是数据传输和连接方式的规范 1. HTTP 是应用层协议，定义的是传输数据的内容的规范 2. HTTP 协议中的数据是利用 TCP 协议传输的，所以支持 HTTP 也就一定支持 TCP
3. HTTP 支持的是 www 服务,而 TCP/IP 是协议 4. 它是 Internet 国际互联网络的基础。TCP/IP 是网络中使用的基本的通信协议。 5. TCP/IP 实际上是一组协议，它包括上百个各种功能的协议，如：远程登录、文件传输和电子邮件等，而 TCP 协议和 IP 协议是保证数据完整传输的两个基本的重要协议。通常说 TCP/IP 是 Internet 协议族，而不单单是 TCP 和 IP。
<a href="https://www.cnblogs.com/wx-1996/p/10685576.html" target="_blank">HTTP 与 TCP 的区别和联系</a></li></ol> <h2 id="_2-http-状态码"><a href="#_2-http-状态码" class="header-anchor">#</a> 2.HTTP 状态码</h2> <p>200 正常 <br>
302 表示临时性重定向。访问一个 Url 时，被重定向到另一个 url 上。<br>
401 请求需要认证<br>
403 请求对应资源禁止访问<br>
404 服务器无法找到对应资源<br>
502 网关错误<br>
504 网关超时<br></p> <h2 id="_3-http1-0-和-http1-1-的区别"><a href="#_3-http1-0-和-http1-1-的区别" class="header-anchor">#</a> 3.HTTP1.0 和 HTTP1.1 的区别</h2> <ul><li>1.0 存在的问题
<ul><li>无法复用连接，每次都需要建立 TCP 连接，而 TCP 连接释放过程又比较费时</li> <li>队头阻塞，由于 HTTP1.0 规定下一个请求必须在前一个请求响应到达之前才能发送，假设前一个请求响应一直不到达，那么下一个请求就不发送，后面的请求就阻塞了。</li></ul></li> <li>缓存处理（cache-control）
<ul><li>强缓存</li> <li>协商缓存</li></ul></li> <li>带宽优化及网络连接的使用</li> <li>增加 host 字段，支持断点传输等</li> <li>长连接
<ul><li>增加了 Connection 字段，通过设置 keep-alive 保持连接不断，避免每次客户端和服务端请求建立释放 TCP 链接，提高网络利用率</li></ul></li></ul> <h2 id="_4-http1-x-和-http2-0-的差别"><a href="#_4-http1-x-和-http2-0-的差别" class="header-anchor">#</a> 4.Http1.x 和 http2.0 的差别</h2> <ul><li><strong>新的二进制格式</strong>（Binary Format），HTTP1.x 的解析是基于文本。基于文本协议的格式解析存在天然缺陷，文本的表现形式有多样性，要做到健壮性考虑的场景必然很多，二进制则不同，只认 0 和 1 的组合。基于这种考虑 HTTP2.0 的协议解析决定采用二进制格式，实现方便且健壮。</li> <li><strong>多路复用</strong>（MultiPlexing），即连接共享，即每一个 request 都是是用作连接共享机制的。一个 request 对应一个 id，这样一个连接上可以有多个 request，每个连接的 request 可以随机的混杂在一起，接收方可以根据 request 的 id 将 request 再归属到各自不同的服务端请求里面。</li> <li><strong>header 压缩</strong>，如上文中所言，对前面提到过 HTTP1.x 的 header 带有大量信息，而且每次都要重复发送，HTTP2.0 使用 encoder 来减少需要传输的 header 大小，通讯双方各自 cache 一份 header fields 表，既避免了重复 header 的传输，又减小了需要传输的大小。</li> <li><strong>服务端推送</strong>（server push），同 SPDY 一样，HTTP2.0 也具有 server push 功能。</li></ul> <h2 id="_5-https-和-http-的区别"><a href="#_5-https-和-http-的区别" class="header-anchor">#</a> 5.https 和 http 的区别</h2> <ul><li>HTTP
超文本传输协议，明文传输，不安全</li> <li>HTTPS</li></ul> <ol><li>https 在 http 的基础上加入了 SSL 协议，SSL 依靠证书来验证服务器的身份，并在浏览器和服务器之间加密<br></li> <li>https 是由 SSL+http 协议构建的可进行加密传输，身份认证的网络协议<br></li> <li>因为 http 是明文传输未加密，不安全，所以设计了 SSL 协议用于对 http 协议传输进行加密<br></li></ol> <ul><li>HTTPS 工作流程
<img src="/assets/img/https.b951d89c.png"> <br> <br></li></ul> <ol><li>Client 发起一个 HTTPS（https:/demo.linianhui.dev）的请求，根据 RFC2818 的规定，Client 知道需要连接 Server 的 443（默认）端口。</li> <li>Server 把事先配置好的公钥证书（public key certificate）返回给客户端。</li> <li>Client 验证公钥证书：比如是否在有效期内，证书的用途是不是匹配 Client 请求的站点，是不是在 CRL 吊销列表里面，它的上一级证书是否有效，这是一个递归的过程，直到验证到根证书（操作系统内置的 Root 证书或者 Client 内置的 Root 证书）。如果验证通过则继续，不通过则显示警告信息。</li> <li>Client 使用伪随机数生成器生成加密所使用的会话密钥，然后用证书的公钥加密这个会话密钥，发给 Server。</li> <li>Server 使用自己的私钥（private key）解密这个消息，得到会话密钥。至此，Client 和 Server 双方都持有了相同的会话密钥。</li> <li>Server 使用会话密钥加密“明文内容 A”，发送给 Client。</li> <li>Client 使用会话密钥解密响应的密文，得到“明文内容 A”。</li> <li>Client 再次发起 HTTPS 的请求，使用会话密钥加密请求的“明文内容 B”，然后 Server 使用会话密钥解密密文，得到“明文内容 B”。</li></ol> <ul><li>HTTPS 优点</li></ul> <ol><li>使用 https 可以认证用户和服务器，确保数据发送到正确的客户机和服务器</li> <li>https 使用 SSL+http 构建的可加密传输、身份认证的网络协议，比 http 更加安全</li> <li>https 是现行最安全的解决方案，增加了中间人的盗取成本</li></ol> <ul><li>HTTPS 缺点</li></ul> <ol><li>https 协议握手比较费时，会使页面加载时间延长</li> <li>https 的缓存不如 http 高效，增加数据开销</li> <li>SSL 协议需要成本费用</li> <li>SSL 需要绑定 IP，不能在同一个 IP 绑定多个域名</li> <li>https 加密范围有限</li></ol> <ul><li>HTTP 和 HTTPS 区别</li></ul> <ol><li>https 协议需要 ca 申请证书</li> <li>http 是超文本传输协议，是明文传输，https 是具有安全性 SSL 加密传输协议，可进行加密传输，身份认证的网络协议，比 http 更安全</li> <li>http 和 https 使用的不同的连接方式，用的端口也不一样，http 默认端口是 80,https 默认端口是 443</li></ol> <p><a href="https://www.jianshu.com/p/97af35e81912" target="_blank">HTTP 与 HTPPS 的区别</a></p> <h2 id="_6-ws-和-ajax-的区别。"><a href="#_6-ws-和-ajax-的区别。" class="header-anchor">#</a> 6.ws 和 ajax 的区别。</h2> <ul><li>本质不同，ajax 是调用浏览器的 xmlhttprequest，是一种创建交互式网页应用的网页开发技术</li> <li>ws 是 THML5 的一种新的协议，实现了浏览器与服务器全双工通信，其本质是通过 HTTP/HTTPS 协议进行握手后创立于一个用于交换数据的 TCP 链接，服务端与客户端通过 TCP 链接进行通信</li> <li>声明周期，ajax 是短连接，数据发送完和接收完会断开链接，ws 是长链接，会在一个会话中一直保存连接</li> <li>websocket 一般用于前后端实时数据交互，而 ajax 前后端非实时数据交互</li> <li>Ajax 技术需要客户端发起请求，而 WebSocket 服务器和客户端可以相互推送信息。</li></ul> <h2 id="_7-ws-的长链接-和-http-的长链接-是一个东西吗"><a href="#_7-ws-的长链接-和-http-的长链接-是一个东西吗" class="header-anchor">#</a> 7.ws 的长链接 和 http 的长链接 是一个东西吗</h2> <ul><li>HTTP1.1 通过使用 Connection:keep-alive 进行长连接，HTTP 1.1 默认进行持久连接。在一次 TCP 连接中可以完成多个 HTTP 请求，但是对每个请求仍然要单独发 header，Keep-Alive 不会永久保持连接，它有一个保持时间，可以在不同的服务器软件（如 Apache）中设定这个时间。这种长连接是一种“伪链接”</li> <li>websocket 的长连接，是一个真的全双工。长连接第一次 tcp 链路建立之后，后续数据可以双方都进行发送，不需要发送请求头。</li> <li>keep-alive 双方并没有建立正真的连接会话，服务端可以在任何一次请求完成后关闭。WebSocket 它本身就规定了是正真的、双工的长连接，两边都必须要维持住连接的状态</li></ul> <h2 id="_8-keep-alive-是什么"><a href="#_8-keep-alive-是什么" class="header-anchor">#</a> 8.keep-alive 是什么</h2> <ul><li>开启 HTTP Keep-Alive 之后，能复用已有的 TCP 链接，当前一个请求已经响应完毕，服务器端没有立即关闭- TCP 链接，而是等待一段时间接收浏览器端可能发送过来的第二个请求，通常浏览器在第一个请求返回之后会立即发送第二个请求，如果某一时刻只能有一个链接，同一个 TCP 链接处理的请求越多，开启 KeepAlive 能节省的 TCP 建立和关闭的消耗就越多。</li> <li>当然通常会启用多个链接去从服务器器上请求资源，但是开启了 Keep-Alive 之后，仍然能加快资源的加载速度。HTTP/1.1 之后默认开启 Keep-Alive, 在 HTTP 的头域中增加 Connection 选项。当设置为<code>Connection:keep-alive</code>表示开启，设置为<code>Connection:close</code>表示关闭。</li></ul> <h2 id="_9-dns解析"><a href="#_9-dns解析" class="header-anchor">#</a> 9. DNS解析</h2> <ul><li>DNS 解析过程:将域名解析成 IP 地址
<ul><li>DNS叫做域名系统，是域名和对应ip地址的分布式数据库。有了它，就可以用域名来访问对应的服务器</li></ul></li> <li>过程：
<ul><li>在浏览器中输入后url后，会优先在浏览器dns缓存中查找，如果有缓存，则直接响应用户的请求</li> <li>如果没有要访问的域名，就继续在操作系统的dns缓存中查找，如果也没有，最后通过本地的dns服务器查到对应的ip地址</li> <li>DNS服务器完整的查询过程
<ul><li>本地DNS服务器向根域名服务器发送请求，根域名服务器会返回一个所查询域的顶级域名服务器地址</li> <li>本地DNS服务器向顶级域名服务器发送请求，接受请求的服务器查询自己的缓存，如果有记录，就返回查询结果，如果没有就返回相关的下一级的权威域名服务器的地址</li> <li>本地DNS服务器向权威域名服务器发送请求，权威域名服务器返回对应的结果</li> <li>本地DNS服务器将返回结果保存在缓存中，便于下次使用</li></ul></li> <li>本地DNS服务器将返回结果返回给浏览器</li></ul></li> <li>DNS预解析
<ul><li>DNS Prefetch 是一种DNS 预解析技术，当你浏览网页时，浏览器会在对网页中的域名进行解析缓存，这样当页面中需要加载该域名的资源时就无需解析，减少用户等待时间，提高用户体验</li></ul></li></ul> <h2 id="_10-网络安全"><a href="#_10-网络安全" class="header-anchor">#</a> 10. 网络安全</h2> <ul><li>XSS(跨站脚本攻击)
<ul><li>XSS攻击介绍： 攻击者通过在页面注入恶意脚本，使之在用户的浏览器上运行</li> <li>XSS 攻击的几种方式
<ul><li>常见于带有用户提交数据的网站功能，如填写基本信息、论坛发帖、商品评论等；在可输入内容的地方提交如<script>alert('XSS')</script>之类的代码
<ul><li>XSS 的恶意代码存在数据库里，浏览器接收到响应后解析执行，混在其中的恶意代码也被执行</li></ul></li> <li>用户点击http://xxx/search?keyword=&quot;&gt;<code>&lt;script&gt;alert('XSS');&lt;/script&gt;</code>，前端直接从url中将keyword后的参数取出来，并显示到页面上，但是没有做转义，就造成了XSS攻击。</li></ul></li> <li>XSS攻击的防范
<ul><li>前端尽量对用户输入内容长度控制、输入内容限制（比如电话号码、邮箱、包括特殊字符的限制）</li> <li>服务器对前端提交的内容做好必要的转义，避免将恶意代码存储到数据库中，造成存储性xss攻击</li> <li>前端对服务器返回的数据做好必要的转义，保证显示到页面的内容正常</li></ul></li></ul></li> <li>csrf 跨站请求伪造
<ul><li>csrf的攻击原理：
<ul><li>诱导受害者进入钓鱼网站，在钓鱼网站中利用你在被攻击网站已登录的凭证（凭证存在cookie中），冒充用户发送恶意请求，这些请求因为携带有用户的登录信息，会被服务器当做正常的请求处理，从而使你的个人隐私泄露或财产损失</li></ul></li> <li>csrf的攻击过程：
<ul><li>受害者登录A站点，并保留了登录凭证（Cookie）</li> <li>攻击者诱导受害者访问了站点B</li> <li>站点B向站点A发送了一个请求，浏览器会默认携带站点A的Cookie信息</li> <li>站点A接收到请求后，对请求进行验证，并确认是受害者的凭证，误以为是受害者发送的请求</li> <li>站点A以受害者的名义执行了站点B的请求，攻击完成，攻击者在受害者不知情的情况下，冒充受害者完成了攻击</li></ul></li> <li>csrf的攻击的必要条件：
<ul><li>用户已登录过某网站，并且没有退出，登录信息存储在cookie中（发送请求时，浏览器会自动在请求头上带上要请求域名的cookie）</li> <li>在不登出A的情况下，访问危险网站B</li></ul></li> <li>CSRF如何防御
<ul><li>根据攻击的原理可以看出，csrf通常是跨域请求（从钓鱼网站B发送请求网站A的请求），请求头上的Referer或origin字段可以判断请求的来源，如果服务器判断请求的域名不在白名单中，就拒绝对应的请求</li> <li>添加token验证
<ul><li>CSRF攻击之所以能够成功，是因为用户验证信息都存在cookie中，攻击者可以完全伪造用户的请求。从请求头或请求参数中添加用户的token用来验证用户，如果请求没有或token不对，就拒绝对应的请求</li></ul></li> <li>验证码
<ul><li>对于转账或支付的环节，强制用户必须与应用进行交互，才能完成最终请求</li></ul></li></ul></li></ul></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">9/12/2023, 11:07:43 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/interview/javascript/browser.html" class="prev">
        5.浏览器
      </a></span> <span class="next"><a href="/interview/javascript/promise.html">
        7.Promise
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.ae29df75.js" defer></script><script src="/assets/js/4.a40782dd.js" defer></script><script src="/assets/js/19.233d0352.js" defer></script>
  </body>
</html>
